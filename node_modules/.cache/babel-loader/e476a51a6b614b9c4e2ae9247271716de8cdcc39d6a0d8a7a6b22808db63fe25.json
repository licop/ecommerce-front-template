{"ast":null,"code":"import axios from 'axios';\nimport { put, takeEvery } from 'redux-saga/effects';\nimport { API } from '../../config';\nimport { SIGNIN, SIGNUP, signupFail, signupSuccess, signinSuccess, signinFail } from '../actions/auth.action';\nfunction* handleSignup(action) {\n  try {\n    yield axios.post(`${API}/signup`, action.payload);\n    yield put(signupSuccess());\n  } catch (error) {\n    yield put(signupFail(error.response.data.error));\n  }\n}\nfunction* handleSignin(action) {\n  try {\n    let response = yield axios.post(`${API}/signin`, action.payload);\n    localStorage.setItem('jwt', response.data);\n    yield put(signinSuccess());\n  } catch (error) {\n    yield put(signinFail(error.response.data.error));\n  }\n}\nexport default function* authSage() {\n  // 注册\n  yield takeEvery(SIGNUP, handleSignup);\n  // 登录\n  yield takeEvery(SIGNIN, handleSignin);\n}","map":{"version":3,"names":["axios","put","takeEvery","API","SIGNIN","SIGNUP","signupFail","signupSuccess","signinSuccess","signinFail","handleSignup","action","post","payload","error","response","data","handleSignin","localStorage","setItem","authSage"],"sources":["/Users/licop/Documents/GitHub/ecommerce-front-template/src/store/sagas/auth.sagas.ts"],"sourcesContent":["import axios from 'axios'\nimport {put, takeEvery} from 'redux-saga/effects'\nimport { API } from '../../config'\nimport { SIGNIN, SIGNUP, SignupAction, signupFail, signupSuccess, SigninAction, signinSuccess, signinFail } from '../actions/auth.action'\n\nfunction* handleSignup(action: SignupAction) {\n  try {\n    yield axios.post(`${API}/signup`, action.payload)\n    yield put(signupSuccess())\n  } catch (error: any) {\n    yield put(signupFail(error.response.data.error))\n  }\n}\n\nfunction* handleSignin(action: SigninAction): any {\n  try {\n    let response: any = yield axios.post(`${API}/signin`, action.payload)\n    localStorage.setItem('jwt', response.data)\n    yield put(signinSuccess())\n  } catch (error: any) {\n    yield put(signinFail(error.response.data.error))\n  }\n}\n\nexport default function* authSage() {\n  // 注册\n  yield takeEvery(SIGNUP, handleSignup)\n  // 登录\n  yield takeEvery(SIGNIN, handleSignin)\n}\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAAQC,GAAG,EAAEC,SAAS,QAAO,oBAAoB;AACjD,SAASC,GAAG,QAAQ,cAAc;AAClC,SAASC,MAAM,EAAEC,MAAM,EAAgBC,UAAU,EAAEC,aAAa,EAAgBC,aAAa,EAAEC,UAAU,QAAQ,wBAAwB;AAEzI,UAAUC,YAAY,CAACC,MAAoB,EAAE;EAC3C,IAAI;IACF,MAAMX,KAAK,CAACY,IAAI,CAAE,GAAET,GAAI,SAAQ,EAAEQ,MAAM,CAACE,OAAO,CAAC;IACjD,MAAMZ,GAAG,CAACM,aAAa,EAAE,CAAC;EAC5B,CAAC,CAAC,OAAOO,KAAU,EAAE;IACnB,MAAMb,GAAG,CAACK,UAAU,CAACQ,KAAK,CAACC,QAAQ,CAACC,IAAI,CAACF,KAAK,CAAC,CAAC;EAClD;AACF;AAEA,UAAUG,YAAY,CAACN,MAAoB,EAAO;EAChD,IAAI;IACF,IAAII,QAAa,GAAG,MAAMf,KAAK,CAACY,IAAI,CAAE,GAAET,GAAI,SAAQ,EAAEQ,MAAM,CAACE,OAAO,CAAC;IACrEK,YAAY,CAACC,OAAO,CAAC,KAAK,EAAEJ,QAAQ,CAACC,IAAI,CAAC;IAC1C,MAAMf,GAAG,CAACO,aAAa,EAAE,CAAC;EAC5B,CAAC,CAAC,OAAOM,KAAU,EAAE;IACnB,MAAMb,GAAG,CAACQ,UAAU,CAACK,KAAK,CAACC,QAAQ,CAACC,IAAI,CAACF,KAAK,CAAC,CAAC;EAClD;AACF;AAEA,eAAe,UAAUM,QAAQ,GAAG;EAClC;EACA,MAAMlB,SAAS,CAACG,MAAM,EAAEK,YAAY,CAAC;EACrC;EACA,MAAMR,SAAS,CAACE,MAAM,EAAEa,YAAY,CAAC;AACvC"},"metadata":{},"sourceType":"module","externalDependencies":[]}